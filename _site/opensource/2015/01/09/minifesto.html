<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>MinimalML: The Minifesto</title>
    <meta name="description" content="Keenon Werling rants about things, and leaves it on the Internet
">

    <link rel="stylesheet" href="/css/main.css">
    <link rel="canonical" href="http://keenon.github.io/opensource/2015/01/09/minifesto.html">
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">There must be a better way</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          <a class="page-link" href="/about/">About</a>
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <header class="post-header">
    <h1 class="post-title">MinimalML: The Minifesto</h1>
    <p class="post-meta">Jan 9, 2015</p>
    <script type="text/javascript"
  		src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
	</script>
  </header>

  <article class="post-content">
    <p>What’s the most important resource in Machine Learning research? It isn’t compute power, office space, or white boards. It’s <em>time</em>. Anything we can do to use it more effectively translates directly into better results. Basically, we want to <em>optimize research</em>, and that’s what this post will be all about.</p>

<p>In any computer science curriculum, they’ll teach you what to do if something is taking too long.</p>

<ol>
  <li>Double check that this isn’t <a href="http://en.wikipedia.org/wiki/Program_optimization">premature optimization</a></li>
  <li>Measure where your bottlenecks are</li>
  <li>Exterminate them with maximum prejudice</li>
</ol>

<p>With <a href="http://github.com/keenon/minimalml">MinimalML</a>, the library I’m opensourcing today (in very early alpha, with no docs yet), I’ve set out to implement tools in software that optimize ML research. Although ML research is software heavy, it is fundamentally a human operation, so the analogy to optimization is stretched at places. With that in mind, let’s go through the optimization checklist together.</p>

<p><strong>1: Be mature, then optimize</strong></p>

<p><img src="http://rs2img.memecdn.com/maturity-test_o_932609.webp" alt="meme" /></p>

<p>I wrote a post about good research discipline a few weeks ago, <a href="/science/2014/12/10/unsolved-problem.html">The “Unsolved Problem” Problem</a>. In summary, I’ve experienced two kinds of research methodologies: The “Undisciplined Method”, and the “Scientific Method.” Far more frequently, the “Undisciplined Method” reigns. When confronted with a new problem, we think about our problem for half a day, whiteboard a few potential solutions, and then spend weeks building the sexiest thing we came up with. We then inevitably (well, 95% of the time) discover the sexy solution underperforms the baseline, and we have insufficient tools to understand why. For the full rant, see <a href="/science/2014/12/10/unsolved-problem.html">the original post</a>. Any research pipeline should optimize the Scientific Method.</p>

<p><strong>2: Find bottlenecks</strong></p>

<p><img src="http://patsylynnforg.files.wordpress.com/2012/09/bottlenecklogo1.jpg" alt="meme" /></p>

<p>It’s easier to analyze research if you have an algorithm for it. In the spirit of mature optimization, we’ll optimize the correct algorithm: the Scientific Method.</p>

<ol>
  <li>Form a hypothesis (usually, this means write down new features to try)</li>
  <li>Write code to test the hypothesis</li>
  <li>Write code to analyze the test results</li>
  <li>Run the code</li>
  <li>Stare at the output until understanding is reached, helped by any automatic analysis tools</li>
</ol>

<p>Depending on your situation, any of these steps could be the bottleneck. That said, it’s pretty easy to list why each step might take too long:</p>

<ol>
  <li>Hypothesis formation is slow if you don’t have a good understanding of the data</li>
  <li>Code writing is slow if you have to build from scratch</li>
  <li>Analysis writing is slow if you don’t recycle old analysis code</li>
  <li>Running is slow if you’re not optimized</li>
  <li>Output analysis is slow if you don’t have good analysis tools</li>
</ol>

<p>So MinimalML will attempt to address each of these in turn.</p>

<p><strong>3: Crush bottlenecks like small insects</strong></p>

<p><img src="http://images5.fanpop.com/image/photos/30900000/terminator-terminator-30973001-1280-1024.jpg" alt="meme" /></p>

<p>Here’s the key idea behind all of MinimalML: All you ever <em>needed</em> for your ML research was logistic regression and a polynomial kernel. It would be nice if it ran also really fast (and/or on a cluster), had an elegant and easy way to express features and kernels, and came with a growing suite of kick-ass error analysis tools.</p>

<p>By only doing one thing (the above, arguably the “minimum”), and doing it very carefully in order to optimize <em>time</em>, I think I’ve created something that will speed up your research process considerably. Here it is <a href="http://github.com/keenon/minimalml">on Github</a>.</p>

<p>Let’s go through MinimalML’s solution to each of the possible bottlenecks in the Scientific Method, one by one:</p>

<ol>
  <li>Hypothesis formation is fast because you have excellent error analysis tools automatically bundled</li>
  <li>Code writing is fast, all you do is subclass Experiment and override its abstract configurations by adding feature extractors as anonymous methods, specifying where to find the data, configuring the kernel, and setting a couple of other computation-related parameters.</li>
  <li>Analysis writing takes no time at all, because it’s automatically bundled by subclassing Experiment</li>
  <li>MinimalML has been very carefully optimized. For example, MinimalML uses a novel Sparse/Dense concatenated vector datastructure that allows super fast inner products (the primary op in linear classifiers), super fast construction, and has a small memory footprint. It’s also been written to take advantage of Spark clusters for training, though you need a very large dataset to see a latency win from using Spark.</li>
  <li>Output analysis is fast and easy because MinimalML bundles a suite of analysis tools (making liberal use of GNUPlot) with each Experiment automatically, making diagnosing the source of low scores a breeze.</li>
</ol>

<p><strong>In defense of linear classifiers</strong></p>

<p>I know that only using linear classifiers seems like an unsexy idea, so let me defend it. First of all, MinimalML is intended to be used early in the research process, primarily for feature engineering in cases where features can conceivably be written by hand (think NLP, not vision). Non-linear classifiers are only slightly less dependant on feature selection than linear classifiers. Even an 8 layer neural net with 1000 hidden units per layer is still only able to predict based on inputs you provide. If those inputs are too rich, no amount of dropout will save you from not having enough training data (if you’re Google, good for you, this doesn’t apply to you). On the other hand, if those inputs don’t carry enough information, even a real human being won’t be able to figure it out, let alone your fancy neural net. So feature selection is important.</p>

<p>The advantages of only supporting linear classifiers over non-linear are that</p>

<ul>
  <li>Linear classifiers can be trained and tested absurdly quickly (speeds up Step 4)</li>
  <li>Linear classifiers are very easy to explain and analyze (makes Step 5 much better + faster)</li>
</ul>

<p><strong>Final Thoughts</strong></p>

<p>There are a few great research ML suites out there, which are <em>way better</em> than MinimalML at almost everything. CoreNLP and Weka come to mind. I have no intention of replacing them. Instead, I want a small, simple, outrageously fast system that makes it easy to do real science quickly. Before you publish, and after you have a good handle on what kinds of features you’ll need and where you can justify complexity in your model, you’ll still want to turn to one of these packages to beef up your classifier. In the beginning of the research process, however, I think MinimalML will come to stand out as an excellent approach to quickly get a good handle on your problem.</p>

<p>MinimalML is in super early alpha as of this writing, and as yet I haven’t written any documentation. I’ll post here again when it’s in a more usable state, but for now, consider this a heads up that “something good this way comes” :)</p>

<p>Cheers,
Keenon</p>

  </article>

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">There must be a better way</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1">
        <ul class="contact-list">
          <li>There must be a better way</li>
          <li><a href="mailto:keenon@stanford.edu">keenon@stanford.edu</a></li>
        </ul>
      </div>

      <div class="footer-col  footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/keenon">
              <span class="icon  icon--github">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
                </svg>
              </span>

              <span class="username">keenon</span>
            </a>
          </li>
          

          
        </ul>
      </div>

      <div class="footer-col  footer-col-3">
        <p class="text">Keenon Werling rants about things, and leaves it on the Internet
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
